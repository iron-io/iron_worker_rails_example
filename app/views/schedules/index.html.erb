<h1>Scheduled tasks</h1>

<h3>Schedule Task</h3>
<%= form_tag(schedules_path) do %>
    <%= label_tag(:worker_name) %>
    <%= text_field_tag(:worker_name, "HelloWorker") %>
    <%= label_tag(:schedule_params) %>
    <%= text_field_tag(:schedule_params, '{"text":"sample"}') %>
    <%= label_tag(:seconds) %>
    <%= select_tag "seconds", options_for_select([5, 10, 15], 1) %>
    <%= submit_tag("Schedule") %>
<% end %>


<h3>List of scheduled tasks:</h3>
<% if !@schedules.empty? %>
    <table border="1">
      <thead>
      <tr>
        <td>Code Name</td>
        <td>Created at</td>
        <td>Status</td>
        <td>Start at</td>
        <td>Next start</td>
        <td>Actions</td>
      </tr>
      </thead>

      <% @schedules.each do |t| %>
          <tr>
            <td><%= t.code_name %></td>
            <td><%= t.created_at %></td>
            <td><%= t.status %></td>
            <td><%= t.start_at %></td>
            <td><%= t.next_start %></td>
            <td>
              <%= button_to "Cancel", cancel_schedule_path(t.id) %>
          </tr>
      <% end %>
    </table>
<% else %>
    <h5>There are now any active scheduled tasks, feel free to schedule new one</h5>
<% end %>

<%= link_to "Back", root_path %>